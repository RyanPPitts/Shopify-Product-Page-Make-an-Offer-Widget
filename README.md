# Shopify Product Page Make an Offer Widget
 

 On the main product liquid file you can insert the js file below or add as a sourced file from the assets folder
 
<pre> ```vbnet &lt;script&gt; // Wait for the full page to load before running this script document.addEventListener("DOMContentLoaded", function () { // Get references to the HTML elements by their IDs const widget = document.getElementById("email-discount-widget"); const button = document.getElementById("get-discount-btn"); const input = document.getElementById("discount-email"); const message = document.getElementById("discount-message"); if (!localStorage.getItem("discount_claimed")) { widget.style.opacity = 0; widget.style.display = "block"; setTimeout(() => { widget.style.transition = "opacity 0.5s ease"; widget.style.opacity = 1; }, 10); input.focus(); } else { document.getElementById("discount-reminder").style.display = "block"; } button.addEventListener("click", function (event) { event.preventDefault(); button.disabled = true; const email = input.value.trim(); if (!email || !validateEmail(email)) { message.innerText = "Please enter a valid email address."; button.disabled = false; return; } const code = "test"; message.innerHTML = `ðŸŽ‰ Your discount code is: &lt;strong&gt;${code}&lt;/strong&gt;&lt;br&gt;It will be automatically applied at checkout.`; document.getElementById("discount-reminder").style.display = "block"; setTimeout(() => { const currentUrl = window.location.pathname + window.location.search; window.location.href = `/discount/test?redirect=${currentUrl}`; }, 3000); localStorage.setItem("discount_claimed", "true"); sendEmailToUser(email, code); input.disabled = true; }); function validateEmail(email) { return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email); } function sendEmailToUser(email, code) { fetch('https://your-email-handler.com/send', { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ email, code }) }).catch(err => { console.warn("Email send failed:", err); }); } function formatMoney(cents) { const value = (cents / 100).toFixed(2); return `$${value}`; } function safeFormatMoney(price) { if (typeof Shopify !== 'undefined' && typeof Shopify.formatMoney === 'function') { return Shopify.formatMoney(price, Shopify.money_format); } return formatMoney(price); } document.addEventListener("variant:change", function (event) { const variant = event.detail.variant; const priceEl = document.querySelector('.product-form__variant-price'); if (variant && priceEl) { priceEl.textContent = safeFormatMoney(variant.price); } }); }); &lt;/script&gt; ``` </pre>